function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var n;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,o,i,s,r=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=i.call(n)).done)&&(r.push(a.value),r.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function ownKeys(e,t){var n,a=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)),a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var DatepickerTabs=(()=>{function o(t){var a=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,o);if(this.options=_objectSpread(_objectSpread({},{mode:"day",displayType:"tabs",multipleDays:!1,multipleMonths:!1,maxMonthSelection:null,startDate:null,minDate:null,maxDate:null,futureSaturdaysOnly:!1,onDateChange:null,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],cookieName:"datepickerTabsMode",dateFormat:"DD MMM YYYY",monthFormat:"MMM YYYY",position:"bottom",zIndex:9999,containerId:"",backwardsYearsOffset:5,forwardsYearsOffset:5}),e),this.instances=[],"string"==typeof t){e=document.querySelectorAll(t);if(1<e.length)return e.forEach(function(t,e){var n=_objectSpread({},a.options),e="datepicker-container-".concat(Date.now(),"-").concat(e);a.instances.push(a._createInstance(t,n,e))}),this.instances;if(1!==e.length)return void console.error("DatepickerTabs: No elements found with selector:",t);this.inputElement=e[0]}else{if(!(t instanceof HTMLElement))return void console.error("DatepickerTabs: Invalid selector or element:",t);this.inputElement=t}var e=this.options.containerId||"datepicker-container-".concat(Date.now());this.containerId=e,this.containerElement=document.createElement("div"),this.containerElement.id=e,this.containerElement.className="datepicker-tabs-container",document.body.appendChild(this.containerElement),this.element=this.containerElement,this.element.classList.add("datepicker-tabs"),this.currentDate=new Date(this.options.startDate||new Date),this.selectedDates=this.options.startDate?[new Date(this.options.startDate)]:[],this.selectedMonths=[],this.isVisible=!1,"day"!==this.options.displayType&&"month"!==this.options.displayType||(this.options.mode=this.options.displayType),"month"===this.options.mode&&this.options.startDate&&(t=new Date(this.options.startDate),this.selectedMonths.push({month:t.getMonth(),year:t.getFullYear()})),0<this.selectedMonths.length?(e=this.selectedMonths[0],this.currentDate=new Date(e.year,e.month,1)):0<this.selectedDates.length&&(t=this.selectedDates[0],this.currentDate=new Date(t.getFullYear(),t.getMonth(),1)),"tabs"===this.options.displayType&&this.restoreModeFromCookie(),this.inputElement&&this.inputElement.value&&!this.options.startDate&&("day"===this.options.mode?0<(e=this.parseDateInput(this.inputElement.value)).length&&(this.selectedDates=e,this.currentDate=new Date(e[0].getFullYear(),e[0].getMonth(),1)):"month"===this.options.mode&&0<(t=this.parseMonthInput(this.inputElement.value)).length&&(this.selectedMonths=t,this.selectedDates=t.map(function(t){return new Date(t.year,t.month,1)}),this.currentDate=new Date(t[0].year,t[0].month,1))),this.init()}return _createClass(o,[{key:"parseDate",value:function(t,o){var i=this;if(!t||!o)return null;var e={DD:/(\d{2})/,D:/(\d{1,2})/,MMM:/([A-Za-z]{3})/,MMMM:/([A-Za-z]+)/,MM:/(\d{2})/,M:/(\d{1,2})/,YYYY:/(\d{4})/,YY:/(\d{2})/},n=o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),a=(Object.keys(e).forEach(function(t){n=n.replace(new RegExp(t,"g"),e[t].source)}),new RegExp("^".concat(n,"$"))),s=t.match(a);if(!s)return null;var r=1,l=0,c=(new Date).getFullYear();try{for(var h=1;h<s.length;)(()=>{var t,e,n,a=s[h];/^\d{4}$/.test(a)?c=parseInt(a,10):/^\d{2}$/.test(a)&&31<parseInt(a,10)?(t=parseInt(a,10),n=(new Date).getFullYear(),e=100*Math.floor(n/100),c=n+50<t+e?t+(e-100):t+e):/^\d{1,2}$/.test(a)&&1<=parseInt(a,10)&&parseInt(a,10)<=12?-1!==o.indexOf("DD")||-1!==o.indexOf("D")?r=parseInt(a,10):l=parseInt(a,10)-1:/^\d{1,2}$/.test(a)&&12<parseInt(a,10)&&parseInt(a,10)<=31?r=parseInt(a,10):/^[A-Za-z]{3,}$/.test(a)&&-1!==(n=i.options.monthNames.findIndex(function(t){return t.toLowerCase().startsWith(a.toLowerCase())}))&&(l=n),h++})();var u=new Date(c,l,r);return isNaN(u.getTime())?null:u}catch(t){return console.error("Error parsing date:",t),null}}},{key:"DPTisValidDate",value:function(t){return t&&t instanceof Date&&!isNaN(t.getTime())}},{key:"parseDateInput",value:function(t){var e,n=this;return t?(e="day"===this.options.mode?this.options.dateFormat:this.options.monthFormat,t.split(",").map(function(t){return t.trim()}).map(function(t){t=n.parseDate(t,e);return n.DPTisValidDate(t)?t:null}).filter(function(t){return null!==t})):[]}},{key:"parseMonthInput",value:function(t){var o=this;return t?t.split(",").map(function(t){return t.trim()}).map(function(t){var e=o.parseDate(t,o.options.monthFormat);if(e&&!isNaN(e.getTime()))return{month:e.getMonth(),year:e.getFullYear()};e=t.match(/([A-Za-z]+)\s+(\d{4})/i);if(e){var n=e[1],e=parseInt(e[2],10),a=o.options.monthNames.findIndex(function(t){return t.toLowerCase().startsWith(n.toLowerCase())});if(-1!==a&&!isNaN(e))return{month:a,year:e}}a=t.match(/(\d{1,2})[\/\-\s](\d{4})/);if(a){e=parseInt(a[1],10)-1,t=parseInt(a[2],10);if(0<=e&&e<=11&&!isNaN(t))return{month:e,year:t}}return null}).filter(function(t){return null!==t}):[]}},{key:"_createInstance",value:function(t,e,n){return new o(t,_objectSpread(_objectSpread({},e),{},{containerId:n}))}},{key:"formatDate",value:function(t,e){var n,a,o;return t&&t instanceof Date&&!isNaN(t.getTime())?"MMM YYYY"===e||"MMMM YYYY"===e?(a=t.getMonth(),o=t.getFullYear(),("MMM YYYY"===e?(n=this.options.monthNames[a].substring(0,3),"".concat(n," ")):"".concat(this.options.monthNames[a]," ")).concat(o)):(n=t.getDate(),a=t.getMonth(),o=t.getFullYear(),e.replace(/YYYY/g,o.toString()).replace(/YY/g,o.toString().slice(-2)).replace(/MMMM/g,this.options.monthNames[a]).replace(/MMM/g,this.options.monthNames[a].substring(0,3)).replace(/MM/g,String(a+1).padStart(2,"0")).replace(/\bM\b/g,String(a+1)).replace(/DD/g,String(n).padStart(2,"0")).replace(/\bD\b/g,String(n))):""}},{key:"positionPicker",value:function(){var t,e,n,a,o,i,s,r,l,c;this.inputElement&&(t=this.element.querySelector(".custom-datepickertabs-container"))&&(e=this.inputElement.getBoundingClientRect(),n=t.offsetHeight,a=t.offsetWidth,i=(o=window.innerHeight)-e.bottom<n&&e.top>n,s=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,l=e.left+s,(l=window.innerWidth+s<l+a?e.right-a+s:l)<s&&(l=s+5),i||"top"===this.options.position?(c=e.top-n+r)<r&&(c=e.bottom+r):o+r<(c=e.bottom+r)+n&&e.top>n&&(c=e.top-n+r),t.style.position="absolute",t.style.top="".concat(c,"px"),t.style.left="".concat(l,"px"),t.style.zIndex=this.options.zIndex)}},{key:"init",value:function(){var e=this;this.render(),this.attachEvents(),this.inputElement&&this.setupInputElement(),this.hide(),document.addEventListener("click",function(t){!e.isVisible||e.element.contains(t.target)||e.inputElement&&e.inputElement.contains(t.target)||e.hide()})}},{key:"setupInputElement",value:function(){var e=this;this.inputElement.classList.add("datepicker-input"),this.updateInputValue(),this.inputElement.addEventListener("click",function(t){t.stopPropagation(),e.isVisible?e.hide():e.show()}),this.inputElement.setAttribute("readonly","readonly"),this.inputElement.getAttribute("placeholder")||this.inputElement.setAttribute("placeholder","Select a date")}},{key:"updateInputValue",value:function(){var t,e=this;this.inputElement&&("day"===this.options.mode?0===this.selectedDates.length?this.inputElement.value="":this.options.multipleDays?(t=this.selectedDates.map(function(t){return e.formatDate(t,e.options.dateFormat)}),this.inputElement.value=t.join(", ")):this.inputElement.value=this.formatDate(this.selectedDates[0],this.options.dateFormat):0===this.selectedMonths.length?this.inputElement.value="":this.options.multipleMonths?(t=this.selectedMonths.map(function(t){return e.formatDate(new Date(t.year,t.month,1),e.options.monthFormat)}),this.inputElement.value=t.join(", ")):(t=this.selectedMonths[0],this.inputElement.value=this.formatDate(new Date(t.year,t.month,1),this.options.monthFormat)))}},{key:"show",value:function(){var t,e=this;!this.isVisible&&(this.inputElement&&this.inputElement.value&&("month"===this.options.mode?0<(t=this.parseMonthInput(this.inputElement.value)).length&&(this.selectedMonths=t,this.selectedDates=t.map(function(t){return new Date(t.year,t.month,1)}),t=t[0],this.currentDate=new Date(t.year,t.month,1)):"day"===this.options.mode&&0<(t=this.parseDateInput(this.inputElement.value)).length&&(t=(this.selectedDates=t)[0],this.currentDate=new Date(t.getFullYear(),t.getMonth(),1))),t=this.element.querySelector(".custom-datepickertabs-container"))&&(t.style.display="block",this.isVisible=!0,setTimeout(function(){e.positionPicker()},0),this.resizeHandler=function(){e.isVisible&&e.positionPicker()},window.addEventListener("resize",this.resizeHandler),t=new CustomEvent("datepickerShow"),this.element.dispatchEvent(t))}},{key:"hide",value:function(){var t;(this.isVisible||this.element.querySelector(".custom-datepickertabs-container"))&&(t=this.element.querySelector(".custom-datepickertabs-container"))&&(t.style.display="none",this.isVisible=!1,this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),t=new CustomEvent("datepickerHide"),this.element.dispatchEvent(t))}},{key:"setModeCookie",value:function(t){var e;"tabs"===this.options.displayType&&((e=new Date).setDate(e.getDate()+7),document.cookie="".concat(this.options.cookieName,"=").concat(t,";expires=").concat(e.toUTCString(),";path=/"))}},{key:"getModeCookie",value:function(){for(var t=this.options.cookieName+"=",e=decodeURIComponent(document.cookie).split(";"),n=0;n<e.length;n++){var a=e[n].trim();if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}},{key:"restoreModeFromCookie",value:function(){var t=this.getModeCookie();!t||"day"!==t&&"month"!==t||(this.options.mode=t)}},{key:"getYearsRange",value:function(t){var e,n=t-this.options.backwardsYearsOffset,t=t+this.options.forwardsYearsOffset;return this.options.minDate&&(e=this.options.minDate.getFullYear(),n=Math.max(n,e)),this.options.maxDate&&(e=this.options.maxDate.getFullYear(),t=Math.min(t,e)),{startYear:n,endYear:t}}},{key:"isMonthSelectable",value:function(t,e){if(this.options.minDate){var n=new Date(this.options.minDate),a=n.getFullYear(),n=n.getMonth();if(e<a||e===a&&t<n)return!1}if(this.options.maxDate){a=new Date(this.options.maxDate),n=a.getFullYear(),a=a.getMonth();if(n<e||e===n&&a<t)return!1}return!0}},{key:"render",value:function(){var t,e,n=this.element.querySelector(".custom-datepickertabs-container");n?((e=n.querySelector(".datepicker-title"))&&(e.textContent="Select ".concat("day"===this.options.mode?"Date":"Month")),(e=n.querySelector(".datepicker-tabs-ui"))&&(t=e.querySelector('[data-mode="day"]'),e=e.querySelector('[data-mode="month"]'),t)&&e&&("day"===this.options.mode?(t.classList.add("active"),e.classList.remove("active")):(t.classList.remove("active"),e.classList.add("active"))),(t=n.querySelector(".datepicker-content"))&&(t.innerHTML="day"===this.options.mode?this.renderDayMode():this.renderMonthMode())):((n=document.createElement("div")).className="custom-datepickertabs-container",n.innerHTML='\n        <div class="datepicker-header">\n          <h3 class="datepicker-title">Select '.concat("day"===this.options.mode?"Date":"Month","</h3>\n        </div>\n      "),"tabs"===this.options.displayType&&(n.innerHTML+='\n          <div class="datepicker-tabs-ui">\n            <button class="datepicker-tab '.concat("day"===this.options.mode?"active":"",'" data-mode="day">Specific Date</button>\n            <button class="datepicker-tab ').concat("month"===this.options.mode?"active":"",'" data-mode="month">Whole Month</button>\n          </div>\n        ')),(e=document.createElement("div")).className="datepicker-content","day"===this.options.mode?e.innerHTML=this.renderDayMode():e.innerHTML=this.renderMonthMode(),n.appendChild(e),n.innerHTML+='\n        <div class="datepicker-footer">\n          <button class="datepicker-btn clear">Clear</button>\n          <button class="datepicker-btn apply">Apply</button>\n        </div>\n      ',this.element.appendChild(n))}},{key:"renderDayMode",value:function(){for(var t=this.currentDate.getFullYear(),e=this.currentDate.getMonth(),n=new Date(t,e+1,0).getDate(),a=new Date(t,e,1).getDay(),o=this.renderYearSelector(t),i='\n      <div class="datepicker-nav">\n        <button class="datepicker-nav-btn prev-month">&lt;</button>\n        <span>'.concat(this.options.monthNames[e]," ").concat(t,'</span>\n        <button class="datepicker-nav-btn next-month">&gt;</button>\n      </div>\n    '),s='<div class="datepicker-days-container">',r=0;r<7;r++)s+='<div class="day-name">'.concat(this.options.dayNames[r],"</div>");for(var l="",c=new Date(0===e?t-1:t,1+(0===e?11:e-1),0).getDate(),h=0;h<a;h++)l+='<div class="day-item other-month disabled">'.concat(c-a+h+1,"</div>");var u=new Date;u.setHours(0,0,0,0);for(var d=1;d<=n;d++){var p=new Date(t,e,d),m=u.getDate()===d&&u.getMonth()===e&&u.getFullYear()===t,y=6===p.getDay(),f=this.isDateSelected(p),p=new Date(p);p.setHours(0,0,0,0);var v,D=!1,m=(this.options.futureSaturdaysOnly&&(D=!(y&&u<p)),this.options.minDate&&((v=new Date(this.options.minDate)).setHours(0,0,0,0),p<v)&&(D=!0),["day-item",m?"today":"",f?"selected":"",(D=this.options.maxDate&&((v=new Date(this.options.maxDate)).setHours(0,0,0,0),v<p)?!0:D)?"disabled":"",y?"saturday":""].filter(Boolean).join(" ")),f=D?"":'data-clickable="true"';l+='<div class="'.concat(m,'" ').concat(f,' data-date="').concat(t,"-").concat(e+1,"-").concat(d,'">').concat(d,"</div>")}for(var g=42-(a+n),M=1;M<=g;M++)l+='<div class="day-item other-month disabled">'.concat(M,"</div>");o=o+i+s+(l+="</div>");return this.options.multipleDays&&0<this.selectedDates.length&&(o+=this.renderSelectedDates()),o}},{key:"renderMonthMode",value:function(){for(var t=this.currentDate.getFullYear(),e=new Date,n=e.getMonth(),a=e.getFullYear(),e=this.renderYearSelector(t),o='<div class="datepicker-month-container">',i=0;i<12;i++){var s=this.isMonthSelected(i,t),r=this.isMonthSelectable(i,t),s=["month-item",s?"selected":"",i===n&&t===a?"this-month":"",r?"":"disabled"].filter(Boolean).join(" "),r=r?'data-month="'.concat(i,'" data-year="').concat(t,'"'):"";o+='<div class="'.concat(s,'" ').concat(r,">").concat(this.options.monthNames[i],"</div>")}e+=o+="</div>";return this.options.multipleMonths&&0<this.selectedMonths.length&&(e+=this.renderSelectedMonths()),e}},{key:"renderYearSelector",value:function(t){var e=this.getYearsRange(t),n=e.startYear,a=e.endYear,o='<div class="datepicker-years">';o+='<select class="year-selector">';for(var i=n;i<=a;i++)o+='<option value="'.concat(i,'" ').concat(i===t?"selected":"",">").concat(i,"</option>");return o=o+"</select>"+"</div>"}},{key:"renderSelectedDates",value:function(){var n=this,a='<div class="multi-select-info">Selected Dates:</div>';return a+='<div class="selected-list">',this.selectedDates.forEach(function(t,e){t=n.formatDate(t,n.options.dateFormat);a+='\n        <div class="selected-item" data-index="'.concat(e,'">\n          ').concat(t,'\n          <button class="remove-btn" data-index="').concat(e,'">×</button>\n        </div>\n      ')}),a+="</div>"}},{key:"renderSelectedMonths",value:function(){var n=this,a='<div class="multi-select-info">Selected Months:</div>';return a+='<div class="selected-list">',this.selectedMonths.forEach(function(t,e){!t||"number"!=typeof t.month||"number"!=typeof t.year||t.month<0||11<t.month||isNaN(t.year)||(t=new Date(t.year,t.month,1),isNaN(t.getTime()))||(t=n.formatDate(t,n.options.monthFormat))&&(a+='\n        <div class="selected-item" data-index="'.concat(e,'">\n          ').concat(t,'\n          <button class="remove-btn" data-index="').concat(e,'">×</button>\n        </div>\n      '))}),a+="</div>"}},{key:"isDateSelected",value:function(e){return this.selectedDates.some(function(t){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()})}},{key:"isMonthSelected",value:function(e,n){return this.selectedMonths.some(function(t){return t.month===e&&t.year===n})}},{key:"isMaxMonthSelectionsReached",value:function(){return null!==this.options.maxMonthSelection&&this.selectedMonths.length>=this.options.maxMonthSelection}},{key:"attachEvents",value:function(){var o,i=this,t=("tabs"===this.options.displayType&&this.element.querySelectorAll(".datepicker-tab").forEach(function(e){e.addEventListener("click",function(t){t.stopPropagation();t=e.getAttribute("data-mode"),i.options.mode=t,i.setModeCookie(t),i.render(),i.attachEvents(),t=new CustomEvent("datepickerModeChange",{detail:{mode:t}});i.element.dispatchEvent(t)})}),this.element.querySelector(".year-selector")),t=(t&&t.addEventListener("change",function(t){i.currentDate.setFullYear(parseInt(t.target.value,10)),i.render(),i.attachEvents()}),this.element.querySelector(".prev-month")),e=this.element.querySelector(".next-month");t&&t.addEventListener("click",function(t){if(t.stopPropagation(),i.options.minDate){var t=new Date(i.options.minDate),e=i.currentDate.getMonth(),n=i.currentDate.getFullYear();if(0===e&&n===t.getFullYear()||e===t.getMonth()&&n===t.getFullYear())return}i.currentDate.setMonth(i.currentDate.getMonth()-1),i.render(),i.attachEvents()}),e&&e.addEventListener("click",function(t){if(t.stopPropagation(),i.options.maxDate){var t=new Date(i.options.maxDate),e=i.currentDate.getMonth(),n=i.currentDate.getFullYear();if(11===e&&n===t.getFullYear()||e===t.getMonth()&&n===t.getFullYear())return}i.currentDate.setMonth(i.currentDate.getMonth()+1),i.render(),i.attachEvents()}),"day"===this.options.mode&&(o=this.element.querySelectorAll('.day-item[data-clickable="true"]')).forEach(function(a){a.addEventListener("click",function(t){t.stopPropagation();var e,n,t=a.getAttribute("data-date");t&&(n=(t=_slicedToArray(t.split("-").map(Number),3))[0],e=new Date(n,t[1]-1,t[2]),i.options.multipleDays?(-1===(n=i.selectedDates.findIndex(function(t){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}))?i.selectedDates.push(e):i.selectedDates.splice(n,1),o.forEach(function(t){return t.classList.remove("selected")}),i.selectedDates.forEach(function(t){t="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()),t=i.element.querySelector('.day-item[data-date="'.concat(t,'"]'));t&&t.classList.add("selected")}),i.render(),i.attachEvents()):(i.selectedDates=[e],o.forEach(function(t){return t.classList.remove("selected")}),a.classList.add("selected"),t=new CustomEvent("datepickerApply",{detail:{mode:"day",selectedDates:i.selectedDates,selectedMonths:[]}}),i.element.dispatchEvent(t),i.updateInputValue(),i.hide(),i.options.onDateChange&&i.options.onDateChange(i.selectedDates[0])))})}),"month"===this.options.mode&&this.element.querySelectorAll(".month-item:not(.disabled)").forEach(function(a){a.addEventListener("click",function(t){t.stopPropagation();var e=parseInt(a.getAttribute("data-month"),10),n=parseInt(a.getAttribute("data-year"),10);i.options.multipleMonths?(-1===(t=i.selectedMonths.findIndex(function(t){return t.month===e&&t.year===n}))?(i.options.maxMonthSelection&&i.selectedMonths.length>=i.options.maxMonthSelection&&i.selectedMonths.shift(),i.selectedMonths.push({month:e,year:n}),i.selectedDates=i.selectedMonths.map(function(t){return new Date(t.year,t.month,1)})):(i.selectedMonths.splice(t,1),i.selectedDates=i.selectedMonths.map(function(t){return new Date(t.year,t.month,1)})),i.render(),i.attachEvents(),i.updateInputValue(),i.options.onDateChange&&i.options.onDateChange(i.selectedDates)):(i.selectedMonths=[{month:e,year:n}],i.selectedDates=[new Date(n,e,1)],i.currentDate=new Date(n,e,1),i.render(),i.attachEvents(),t=new CustomEvent("datepickerApply",{detail:{mode:"month",selectedDates:i.selectedDates,selectedMonths:i.selectedMonths}}),i.element.dispatchEvent(t),i.updateInputValue(),i.hide(),i.options.onDateChange&&i.options.onDateChange(i.selectedDates[0]))})});this.element.querySelectorAll(".remove-btn").forEach(function(e){e.addEventListener("click",function(t){t.stopPropagation();var t=parseInt(e.getAttribute("data-index"),10);("day"===i.options.mode?i.selectedDates:i.selectedMonths).splice(t,1),i.render(),i.attachEvents(),i.options.onDateChange&&("day"===i.options.mode?i.options.onDateChange(i.options.multiple?i.selectedDates:i.selectedDates[0]):(t=i.selectedMonths.map(function(t){return new Date(t.year,t.month,1)}),i.options.onDateChange(i.options.multiple?t:t[0])))})});t=this.element.querySelector(".datepicker-btn.clear"),t&&t.addEventListener("click",function(t){t.stopPropagation(),i.selectedDates=[],i.selectedMonths=[],i.render(),i.attachEvents(),i.inputElement&&(i.inputElement.value="");t=new CustomEvent("datepickerClear");i.element.dispatchEvent(t),i.options.onDateChange&&i.options.onDateChange(null)}),e=this.element.querySelector(".datepicker-btn.apply");e&&e.addEventListener("click",function(t){t.stopPropagation();var t=new CustomEvent("datepickerApply",{detail:{mode:i.options.mode,selectedDates:i.selectedDates,selectedMonths:i.selectedMonths}});i.element.dispatchEvent(t),i.updateInputValue(),i.hide(),i.options.onDateChange&&("day"===i.options.mode?0<i.selectedDates.length?i.options.onDateChange(i.options.multipleDays?i.selectedDates:i.selectedDates[0]):i.options.onDateChange(null):0<i.selectedMonths.length?(t=i.selectedMonths.map(function(t){return new Date(t.year,t.month,1)}),i.options.onDateChange(i.options.multipleMonths?t:t[0])):i.options.onDateChange(null))})}},{key:"setMode",value:function(t){return"day"!==t&&"month"!==t||(this.options.mode=t,"tabs"===this.options.displayType&&this.setModeCookie(t),this.render(),this.attachEvents(),this.updateInputValue()),this}},{key:"getMode",value:function(){return this.options.mode}},{key:"setDisplayType",value:function(t){return"tabs"!==t&&"day"!==t&&"month"!==t||("tabs"!==(this.options.displayType=t)&&(this.options.mode=t),this.render(),this.attachEvents()),this}},{key:"setDate",value:function(t){return Array.isArray(t)?(this.selectedDates=t.map(function(t){return new Date(t)}),this.selectedMonths=t.map(function(t){return{month:new Date(t).getMonth(),year:new Date(t).getFullYear()}})):t?(this.selectedDates=[new Date(t)],t=new Date(t),this.selectedMonths=[{month:t.getMonth(),year:t.getFullYear()}]):(this.selectedDates=[],this.selectedMonths=[]),this.render(),this.attachEvents(),this.updateInputValue(),this}},{key:"setMaxMonthSelection",value:function(t){return null!==(this.options.maxMonthSelection=t)&&this.selectedMonths.length>t&&(this.selectedMonths=this.selectedMonths.slice(-t),this.selectedDates=this.selectedMonths.map(function(t){return new Date(t.year,t.month,1)}),this.render(),this.attachEvents(),this.updateInputValue()),this}},{key:"getDate",value:function(){var t;return"day"===this.options.mode?0===this.selectedDates.length?null:this.options.multipleDays?this.selectedDates:this.selectedDates[0]:0===(t=this.selectedMonths.map(function(t){return new Date(t.year,t.month,1)})).length?null:this.options.multipleMonths?t:t[0]}},{key:"setMultipleDays",value:function(t){return this.options.multipleDays=!!t,this.render(),this.attachEvents(),this}},{key:"setMultipleMonths",value:function(t){return this.options.multipleMonths=!!t,this.render(),this.attachEvents(),this}},{key:"setMultiple",value:function(t){return this.options.multipleDays=!!t,this.options.multipleMonths=!!t,this.render(),this.attachEvents(),this}},{key:"setDateFormat",value:function(t){return this.options.dateFormat=t,this.updateInputValue(),this}},{key:"setMonthFormat",value:function(t){return this.options.monthFormat=t,this.updateInputValue(),this}},{key:"setMinDate",value:function(t){return this.options.minDate=t?new Date(t):null,this.render(),this.attachEvents(),this}},{key:"setMaxDate",value:function(t){return this.options.maxDate=t?new Date(t):null,this.render(),this.attachEvents(),this}},{key:"destroy",value:function(){var t;this.inputElement&&(t=this.inputElement.cloneNode(!0),this.inputElement.parentNode.replaceChild(t,this.inputElement)),this.containerElement&&this.containerElement.parentNode&&this.containerElement.parentNode.removeChild(this.containerElement),this.element=null,this.inputElement=null,this.containerElement=null,this.instances=[]}},{key:"getDatesAsString",value:function(t){var e,n,a=this.getMode();return Array.isArray(t)?t.map(function(t){var e=t.toLocaleString("default",{month:"short"}),n=t.getFullYear(),t=t.getDay();return("day"==a?"".concat(t," "):"").concat(e," ").concat(n)}).join(", "):(e=t.toLocaleString("default",{month:"short"}),n=t.getFullYear(),t=t.getDate(),("day"==a?"".concat(t," "):"").concat(e," ").concat(n))}}])})();window.DatepickerTabs=DatepickerTabs;
//# sourceMappingURL=custom-datepicker.min.js.map
