<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DatepickerTabs Demo</title>
    <link rel="stylesheet" href="./../dist/css/custom-datepicker.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            color: #2196f3;
        }

        .demo-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }

        .demo-section {
            flex: 1;
            min-width: 300px;
            padding: 20px;
            border: 1px solid #eaeaea;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .demo-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .demo-column-1 {
            flex: 1;
            min-width: 100px;
            padding: 10px;
        }

        .demo-column {
            flex: 1;
            min-width: 300px;
            padding: 10px;
        }

        .demo-input {
            width: 95%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            background-color: #f9f9f9;
        }

        .options-panel {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .option-row {
            margin-bottom: 10px;
        }


        .demo-input {
            width: 95%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .result-display {
            background-color: #f2f7fd;
            padding: 15px;
            border-radius: 8px;
            min-height: 60px;
        }

        .code-block {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            overflow: auto;
            font-family: monospace;
            font-size: 14px;
        }

        footer {
            margin-top: 50px;
            text-align: center;
            padding: 20px;
            border-top: 1px solid #eaeaea;
            font-size: 14px;
        }

        .options {
            margin-top: 20px;
        }

        .option-row {
            margin-bottom: 10px;
        }

        .option-row label {
            display: inline-block;
            width: 120px;
        }

        label {
            display: inline-block;
            width: 140px;
            font-weight: 500;
        }

        .result-panel {
            background-color: #f2f7fd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            min-height: 100px;
        }

        .btn {
            padding: 8px 16px;
            background-color: #2196f3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            margin-right: 10px;
            transition: background-color 0.2s;
        }

        .btn:hover {
            background-color: #0d8aee;
        }

        .btn-secondary {
            background-color: #f3f4f6;
            color: #333;
        }

        .btn-secondary:hover {
            background-color: #e3e5e8;
        }

        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            overflow: auto;
            font-size: 14px;
        }

        code {
            font-family: monospace;
        }

        /* Styling for documentation */
        .documentation {
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            margin-top: 40px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .documentation h2 {
            border-bottom: 1px solid #eaeaea;
            padding-bottom: 10px;
        }

        .documentation h3 {
            margin-top: 25px;
            margin-bottom: 10px;
            color: #2196f3;
        }

        .documentation ul {
            padding-left: 20px;
        }

        .documentation .method {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #eaeaea;
        }

        .documentation .method:last-child {
            border-bottom: none;
        }

        .documentation .method-name {
            color: #333;
            font-weight: bold;
            font-family: monospace;
        }

        .documentation .method-description {
            margin: 10px 0;
        }

        .documentation .parameter {
            margin-left: 20px;
            font-style: italic;
        }

        .code-example {
            margin: 15px 0;
        }

        /* For the bottom demo that tests overlap handling */
        .bottom-demo {
            margin-top: 100px;
            border-top: 1px solid #ccc;
            padding-top: 20px;
        }
    </style>


</head>
<body>
<header>
    <h1>DatepickerTabs</h1>
    <p>A versatile date picker with day and month selection modes</p>
    <a href="https://github.com/swayoleg/datepicker-tabs" class="github-link">View on GitHub</a>
</header>

<div class="container">

    <div class="demo-section">
        <h2>Few Months Selection Demo</h2>
        <p>This example demonstrates the month selection mode with multiple month selection enabled and restriction to 3 month at once.</p>

        <div class="demo-row">
            <div class="demo-column">
                <h3>Few Months Picker</h3>
                <input type="text" id="month-input" class="demo-input" placeholder="Click to select month(s)">

                <div class="result-panel">
                    <h4>Selected Values:</h4>
                    <div id="month-result"></div>
                </div>
            </div>

            <div class="demo-column">
                <h3>Code Example</h3>
                <pre><code>//Few Months picker initialization
  const monthPicker = new DatepickerTabs('#month-input', {
        mode: 'month',
        multipleMonths: true,
        maxMonthSelection: 3,
        monthFormat: 'MMM YYYY',
        onDateChange: function(dates) {
            const monthResult = document.getElementById('month-result');
            if (dates) {
                monthResult.textContent = monthPicker.getDatesAsString(dates)
            } else {
                monthResult.textContent = 'No months selected';
            }
        }
    });
</code></pre>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>Month Mode</h2>
        <p>This example demonstrates the one month selection mode with NO date selection.</p>

        <div class="demo-row">
            <div class="demo-column">
                <h3>Single Month Picker Only</h3>
                <input type="text" id="month-mode-example" class="demo-input" placeholder="Click to select month(s)">

                <div class="result-panel">
                    <h4>Selected Month:</h4>
                    <div id="month-mode-example-result"></div>
                </div>
            </div>

            <div class="demo-column">
                <h3>Code Example</h3>
                <pre><code>//Single Month mode picker only
const monthPickerOnly = new DatepickerTabs('#month-mode-example', {
    mode: 'month',
    displayType: 'month',
    multipleMonths: false,
    monthFormat: 'MMM YYYY',
    onDateChange: function(dates) {
            const monthResultSingleMode = document.getElementById('month-mode-example-result');
            if (dates) {
                monthResultSingleMode.textContent = monthPickerOnly.getDatesAsString(dates)
            } else {
                monthResultSingleMode.textContent = 'No months selected';
            }
    }
});</code></pre>
            </div>
        </div>
    </div>


    <div class="demo-section">
        <h2>Configurator</h2>
        <p>Configure your DatepickerTabs with the options below, test it out, and generate code to use in your project.</p>

        <div class="demo-row">
            <div class="demo-column">
                <h3>Options</h3>
                <div class="options-panel">
                    <!-- Basic Configuration -->
                    <h4>Basic Configuration</h4>
                    <div class="option-row">
                        <label for="config-mode">Initial Mode:</label>
                        <select id="config-mode">
                            <option value="day">Day</option>
                            <option value="month">Month</option>
                        </select>
                    </div>

                    <div class="option-row">
                        <label for="config-display-type">Display Type:</label>
                        <select id="config-display-type">
                            <option value="tabs">Tabs (Show both Day & Month)</option>
                            <option value="day">Day Only (No Tabs)</option>
                            <option value="month">Month Only (No Tabs)</option>
                        </select>
                    </div>

                    <!-- Selection Options -->
                    <h4>Selection Options</h4>
                    <div class="option-row">
                        <label for="config-multiple-days">Multiple Day Selection:</label>
                        <input type="checkbox" id="config-multiple-days">
                    </div>

                    <div class="option-row">
                        <label for="config-multiple-months">Multiple Month Selection:</label>
                        <input type="checkbox" id="config-multiple-months" checked>
                    </div>

                    <div class="option-row">
                        <label for="config-max-months">Max Month Selection:</label>
                        <input type="number" id="config-max-months" min="1" max="12" value="6">
                        <small>(When multiple months enabled)</small>
                    </div>

                    <!-- Range Options -->
                    <h4>Date Range</h4>
                    <div class="option-row">
                        <label for="config-min-date">Min Date:</label>
                        <input type="date" id="config-min-date">
                    </div>

                    <div class="option-row">
                        <label for="config-max-date">Max Date:</label>
                        <input type="date" id="config-max-date">
                    </div>

                    <div class="option-row">
                        <label for="config-saturdays">Future Saturdays Only:</label>
                        <input type="checkbox" id="config-saturdays">
                    </div>

                    <!-- Format Options -->
                    <h4>Format Options</h4>
                    <div class="option-row">
                        <label for="config-date-format">Date Format:</label>
                        <select id="config-date-format">
                            <option value="DD MMM YYYY">DD MMM YYYY (01 Jan 2025)</option>
                            <option value="DD/MM/YYYY">DD/MM/YYYY (01/01/2025)</option>
                            <option value="MM/DD/YYYY">MM/DD/YYYY (01/01/2025)</option>
                            <option value="YYYY-MM-DD">YYYY-MM-DD (2025-01-01)</option>
                        </select>
                    </div>

                    <div class="option-row">
                        <label for="config-month-format">Month Format:</label>
                        <select id="config-month-format">
                            <option value="MMM YYYY">MMM YYYY (Jan 2025)</option>
                            <option value="MMMM YYYY">MMMM YYYY (January 2025)</option>
                            <option value="MM/YYYY">MM/YYYY (01/2025)</option>
                            <option value="YYYY-MM">YYYY-MM (2025-01)</option>
                        </select>
                    </div>

                    <!-- UI Settings -->
                    <h4>UI Settings</h4>
                    <div class="option-row">
                        <label for="config-position">Position:</label>
                        <select id="config-position">
                            <option value="bottom">Bottom</option>
                            <option value="top">Top</option>
                        </select>
                    </div>

                    <div class="option-row">
                        <label for="config-zindex">z-index:</label>
                        <input type="number" id="config-zindex" value="9999">
                    </div>

                    <!-- Actions -->
                    <div class="option-row" style="margin-top: 20px;">
                        <button id="config-apply" class="btn">Apply & Generate Code</button>
                        <button id="config-reset" class="btn btn-secondary">Reset to Defaults</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="demo-row">
            <div class="demo-column">
                <h3>Preview</h3>
                <input type="text" id="config-datepicker" class="demo-input" placeholder="Click to select a date">
                <div class="result-panel">
                    <h4>Selected Value(s):</h4>
                    <div id="config-result"></div>
                </div>
            </div>


        </div>

        <!-- Generated Code Output -->
        <div class="demo-row" style="margin-top: 30px;">
            <div class="demo-column" style="flex: 1;">
                <h3>Generated Code</h3>
                <pre id="config-code" style="width: 100%; height: 200px; overflow: auto; background: #f5f5f5; padding: 15px; border-radius: 5px;"></pre>
            </div>
        </div>
    </div>



    <!-- Test for bottom of page positioning -->
    <div class="bottom-demo">
        <h2>Bottom of Page Test</h2>
        <p>This tests that the date picker correctly positions itself when near the bottom of the viewport. (scroll that way so input is in the botton of the page)</p>

        <div class="demo-row">
            <div class="demo-column">
                <input type="text" id="bottom-date-input" class="demo-input" placeholder="Click to select a date">
            </div>
        </div>
    </div>

    <!-- Documentation Section -->
    <div class="documentation">
        <h2>Custom Date Picker Documentation</h2>
        <p>
            A versatile date picker with day and month selection modes, designed for use with form inputs.
            It doesnt pretend to be a pest datepicker and main reason of creation was - there is no datepicker where you can select multiply month (with limit) in one tab and same time
        </p>

        <h3>Installation</h3>
        <p>Include the CSS and JavaScript files in your HTML:</p>
        <pre><code>&lt;link rel="stylesheet" href="css/custom-datepicker.css"&gt;
&lt;script src="js/custom-datepicker.js"&gt;&lt;/script&gt;</code></pre>

        <h3>Basic Usage</h3>
        <p>Create a container element and an input field, then initialize the date picker:</p>
        <pre><code>// HTML
&lt;input type="text" id="date-input" placeholder="Select a date"&gt;

// JavaScript
const datePicker = new DatepickerTabs('#date-input', {
  dateFormat: 'DD/MM/YYYY',
  onDateChange: function(date) {
    console.log('Selected date:', date);
  }
});</code></pre>

        <h3>Options</h3>
        <ul>
            <li><code>mode</code>: 'day' or 'month' (default: 'day')</li>
            <li><code>multiple</code>: Allow multiple selection (default: false)</li>
            <li><code>startDate</code>: Initial selected date (default: today)</li>
            <li><code>minDate</code>: Minimum selectable date (default: null)</li>
            <li><code>maxDate</code>: Maximum selectable date (default: null)</li>
            <li><code>futureSaturdaysOnly</code>: Only enable future Saturdays (default: false)</li>
            <li><code>dateFormat</code>: Format for day mode (default: 'DD MMM YYYY')</li>
            <li><code>monthFormat</code>: Format for month mode (default: 'MMM YYYY')</li>
            <li><code>position</code>: Default position relative to input ('bottom' or 'top', default: 'bottom')</li>
            <li><code>onDateChange</code>: Callback function when date(s) are selected</li>
        </ul>

        <h3>Methods</h3>

        <div class="method">
            <div class="method-name">setDate(date)</div>
            <div class="method-description">Sets the selected date(s)</div>
            <div class="parameter">date: Date object, array of Date objects, or null</div>
            <div class="code-example">
          <pre><code>// Set a single date
datePicker.setDate(new Date());

// Set multiple dates
datePicker.setDate([new Date(2023, 0, 1), new Date(2023, 1, 1)]);

// Clear selection
datePicker.setDate(null);</code></pre>
            </div>
        </div>

        <div class="method">
            <div class="method-name">getDate()</div>
            <div class="method-description">Gets the currently selected date(s)</div>
            <div class="code-example">
                <pre><code>const selectedDate = datePicker.getDate();</code></pre>
            </div>
        </div>

        <div class="method">
            <div class="method-name">setMode(mode)</div>
            <div class="method-description">Sets the picker mode</div>
            <div class="parameter">mode: 'day' or 'month'</div>
            <div class="code-example">
                <pre><code>datePicker.setMode('month');</code></pre>
            </div>
        </div>

        <div class="method">
            <div class="method-name">setMultiple(enable)</div>
            <div class="method-description">Enables or disables multiple selection</div>
            <div class="parameter">enable: boolean</div>
            <div class="code-example">
                <pre><code>datePicker.setMultiple(true);</code></pre>
            </div>
        </div>

        <div class="method">
            <div class="method-name">setDateFormat(format)</div>
            <div class="method-description">Sets the date format for day mode</div>
            <div class="parameter">format: string (e.g., 'DD/MM/YYYY')</div>
            <div class="code-example">
                <pre><code>datePicker.setDateFormat('YYYY-MM-DD');</code></pre>
            </div>
        </div>

        <div class="method">
            <div class="method-name">setMonthFormat(format)</div>
            <div class="method-description">Sets the date format for month mode</div>
            <div class="parameter">format: string (e.g., 'MMM YYYY')</div>
            <div class="code-example">
                <pre><code>datePicker.setMonthFormat('MM/YYYY');</code></pre>
            </div>
        </div>

        <div class="method">
            <div class="method-name">show()</div>
            <div class="method-description">Shows the date picker</div>
            <div class="code-example">
                <pre><code>datePicker.show();</code></pre>
            </div>
        </div>

        <div class="method">
            <div class="method-name">hide()</div>
            <div class="method-description">Hides the date picker</div>
            <div class="code-example">
                <pre><code>datePicker.hide();</code></pre>
            </div>
        </div>
    </div>
</div>



<footer>
    <p>DatepickerTabs is released under the MIT License.</p>
    <p>&copy; 2025 <a href="https://github.com/swayoleg/datepicker-tabs">swayoleg/datepicker-tabs</a></p>
</footer>

<script src="./../src/assets/js/custom-datepicker.js"></script>
<script>




    // Month picker initialization
    const monthPicker = new DatepickerTabs('#month-input', {
        mode: 'month',
        multipleMonths: true,
        maxMonthSelection: 3,
        monthFormat: 'MMM YYYY',
        onDateChange: function(dates) {
            const monthResult = document.getElementById('month-result');
            if (dates) {
                monthResult.textContent = monthPicker.getDatesAsString(dates)
            } else {
                monthResult.textContent = 'No months selected';
            }
        }
    });

    //Single Month mode picker only
    const monthPickerOnly = new DatepickerTabs('#month-mode-example', {
        mode: 'month',
        displayType: 'month',
        multipleMonths: false,
        monthFormat: 'MMM YYYY',
        onDateChange: function(dates) {
            const monthResultSingleMode = document.getElementById('month-mode-example-result');
            if (dates) {
                monthResultSingleMode.textContent = monthPickerOnly.getDatesAsString(dates)
            } else {
                monthResultSingleMode.textContent = 'No months selected';
            }
        }
    });


    // DatepickerTabs Configurator
    document.addEventListener('DOMContentLoaded', function() {
        // DOM Elements
        const configResult = document.getElementById('config-result');
        const configCode = document.getElementById('config-code');
        const applyButton = document.getElementById('config-apply');
        const resetButton = document.getElementById('config-reset');

        // Form elements
        const configMode = document.getElementById('config-mode');
        const configDisplayType = document.getElementById('config-display-type');
        const configMultipleDays = document.getElementById('config-multiple-days');
        const configMultipleMonths = document.getElementById('config-multiple-months');
        const configMaxMonths = document.getElementById('config-max-months');
        const configMinDate = document.getElementById('config-min-date');
        const configMaxDate = document.getElementById('config-max-date');
        const configSaturdays = document.getElementById('config-saturdays');
        const configDateFormat = document.getElementById('config-date-format');
        const configMonthFormat = document.getElementById('config-month-format');
        const configPosition = document.getElementById('config-position');
        const configZIndex = document.getElementById('config-zindex');

        // Datepicker instance
        let configPicker = null;

        // Get current options from form, only including non-default values
        function getOptionsFromForm() {
            const options = {};

            // Only add non-default values
            const mode = configMode.value;
            if (mode !== 'day') {
                options.mode = mode;
            }

            const displayType = configDisplayType.value;
            if (displayType !== 'tabs') {
                options.displayType = displayType;
            }

            // Add multiple selection options only if they differ from defaults
            if (configMultipleDays.checked) {
                options.multipleDays = true;
            }

            if (configMultipleMonths.checked) {
                options.multipleMonths = true;
            }

            // Only add max month selection if multiple months is enabled and value is set
            if (configMultipleMonths.checked && configMaxMonths.value && parseInt(configMaxMonths.value, 10) > 0) {
                options.maxMonthSelection = parseInt(configMaxMonths.value, 10);
            }

            // Add date range options if specified
            if (configMinDate.value) {
                options.minDate = new Date(configMinDate.value);
            }

            if (configMaxDate.value) {
                options.maxDate = new Date(configMaxDate.value);
            }

            // Add Saturday-only option only if checked
            if (configSaturdays.checked) {
                options.futureSaturdaysOnly = true;
            }

            // Add format options only if they differ from defaults
            if (configDateFormat.value !== 'DD MMM YYYY') {
                options.dateFormat = configDateFormat.value;
            }

            if (configMonthFormat.value !== 'MMM YYYY') {
                options.monthFormat = configMonthFormat.value;
            }

            // Add UI options only if they differ from defaults
            if (configPosition.value !== 'bottom') {
                options.position = configPosition.value;
            }

            const zIndex = parseInt(configZIndex.value, 10);
            if (zIndex !== 9999) {
                options.zIndex = zIndex;
            }

            return options;
        }

        // Generate code based on current settings, only showing non-default options
        function updateCodeDisplay() {
            const options = getOptionsFromForm();

            // Format JS object for display, starting with initialization
            let codeString = `// Initialize DatepickerTabs
const picker = new DatepickerTabs('#date-input', {
`;

            // Add each non-default option
            let hasOptions = false;
            for (const [key, value] of Object.entries(options)) {
                hasOptions = true;
                if (typeof value === 'string') {
                    codeString += `    ${key}: '${value}',\n`;
                } else if (value instanceof Date) {
                    codeString += `    ${key}: new Date(${value.getFullYear()}, ${value.getMonth()}, ${value.getDate()}),\n`;
                } else {
                    codeString += `    ${key}: ${value},\n`;
                }
            }

            // Always add callback function as it's typically needed
            if (hasOptions) {
                codeString += `    onDateChange: function(date) {\n        console.log('Selected:', date);\n        // Your code to handle date changes\n    }\n`;
            } else {
                codeString += `    onDateChange: function(date) {\n        console.log('Selected:', date);\n        // Your code to handle date changes\n    }\n`;
            }

            codeString += `});`;

            configCode.textContent = codeString;
        }

        // Initialize with default options or specific options
        function initPicker(options = {}) {
            if (configPicker) {
                configPicker.destroy();
            }

            // Always add the callback
            options.onDateChange = updateResult;

            // Create new picker with provided options
            configPicker = new DatepickerTabs('#config-datepicker', options);

            // Update code display
            updateCodeDisplay();
        }

        // Update result display
        function updateResult(date) {

            if (!date) {
                configResult.textContent = 'No date selected';
            } else if (Array.isArray(date)) {
                configResult.textContent = date.map(d => d.toLocaleDateString()).join(', ');
            } else {
                configResult.textContent = date.toLocaleDateString();
            }
        }

        // Apply options from form by creating a new datepicker instance
        function applyOptions() {
            // Get options from form
            const options = getOptionsFromForm();

            // Reinitialize the picker with new options
            initPicker(options);
        }

        // Reset form to default values
        function resetForm() {
            configMode.value = 'day';
            configDisplayType.value = 'tabs';
            configMultipleDays.checked = false;
            configMultipleMonths.checked = false;
            configMaxMonths.value = 6;
            configMinDate.value = '';
            configMaxDate.value = '';
            configSaturdays.checked = false;
            configDateFormat.value = 'DD MMM YYYY';
            configMonthFormat.value = 'MMM YYYY';
            configPosition.value = 'bottom';
            configZIndex.value = 9999;

            // Reinitialize with default options
            initPicker();
        }

        // Event listeners
        applyButton.addEventListener('click', applyOptions);
        resetButton.addEventListener('click', resetForm);

        // Add support for setMultipleDays and setMultipleMonths if not present in the DatepickerTabs class
        if (typeof DatepickerTabs.prototype.setMultipleDays !== 'function') {
            DatepickerTabs.prototype.setMultipleDays = function(enable) {
                this.options.multipleDays = !!enable;
                if (this.options.mode === 'day') {
                    this.options.multiple = !!enable;
                }
                return this;
            };
        }

        if (typeof DatepickerTabs.prototype.setMultipleMonths !== 'function') {
            DatepickerTabs.prototype.setMultipleMonths = function(enable) {
                this.options.multipleMonths = !!enable;
                if (this.options.mode === 'month') {
                    this.options.multiple = !!enable;
                }
                return this;
            };
        }

        // Initialize on page load with default options
        initPicker();
    });
</script>
</body>
</html>